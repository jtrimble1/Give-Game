{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useUser}from'@clerk/clerk-react';import'./Profile.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Profile(){const{user}=useUser();const[dbUser,setDbUser]=useState(null);useEffect(()=>{if(!user)return;const email=user.primaryEmailAddress.emailAddress;fetch(`/api/users/${email}`).then(res=>{if(res.status===404){var _user$phoneNumbers,_user$phoneNumbers$;return fetch('/api/users',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email,first_name:user.firstName,last_name:user.lastName,photo_url:user.imageUrl,phone:((_user$phoneNumbers=user.phoneNumbers)===null||_user$phoneNumbers===void 0?void 0:(_user$phoneNumbers$=_user$phoneNumbers[0])===null||_user$phoneNumbers$===void 0?void 0:_user$phoneNumbers$.phoneNumber)||null,method:user.externalAccounts.length>0?user.externalAccounts[0].provider:'local'})}).then(res=>res.json());}else{return res.json();}}).then(data=>setDbUser(data)).catch(err=>console.error(err));},[user]);if(!user||!dbUser)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading profile...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"profile-page\",children:[/*#__PURE__*/_jsx(\"img\",{src:dbUser.photo_url||user.imageUrl,alt:\"Profile Pic\",className:\"profile-pic\"}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"Welcome, \",dbUser.first_name,\"!\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-info\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"First Name:\"}),\" \",dbUser.first_name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Last Name:\"}),\" \",dbUser.last_name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",dbUser.email]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Phone:\"}),\" \",dbUser.phone||'N/A']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Card on file:\"}),\" Visa ending in **** \",dbUser.card_last_four||'----']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Current Teams:\"}),\" Team Example\"]})]})]});}export default Profile;","map":{"version":3,"names":["React","useEffect","useState","useUser","jsx","_jsx","jsxs","_jsxs","Profile","user","dbUser","setDbUser","email","primaryEmailAddress","emailAddress","fetch","then","res","status","_user$phoneNumbers","_user$phoneNumbers$","method","headers","body","JSON","stringify","first_name","firstName","last_name","lastName","photo_url","imageUrl","phone","phoneNumbers","phoneNumber","externalAccounts","length","provider","json","data","catch","err","console","error","children","className","src","alt","card_last_four"],"sources":["/Users/jamieltrimble/Desktop/projects/Give-Game/givengame-frontend/src/Pages/Profile.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useUser } from '@clerk/clerk-react';\nimport './Profile.css'\n\nfunction Profile () {\n    const { user } = useUser();\n    const [ dbUser, setDbUser ] = useState(null);\n\n    useEffect(() => {\n        if (!user) return;\n\n        const email = user.primaryEmailAddress.emailAddress;\n\n        fetch(`/api/users/${email}`)\n            .then(res => {\n                if(res.status === 404) {\n                    return fetch('/api/users', {\n                        method: 'POST',\n                        headers: { 'Content-Type': 'application/json'},\n                        body: JSON.stringify({\n                            email,\n                            first_name: user.firstName,\n                            last_name: user.lastName,\n                            photo_url: user.imageUrl,\n                            phone: user.phoneNumbers?.[0]?.phoneNumber || null,\n                            method: user.externalAccounts.length > 0\n                            ? user.externalAccounts[0].provider\n                            : 'local',\n                        }),\n                    }).then(res => res.json());\n                } else {\n                    return res.json()\n                }\n            })\n            .then(data => setDbUser(data))\n            .catch(err => console.error(err))\n    }, [user]);\n\n    if (!user || !dbUser) return <div>Loading profile...</div>\n\n    return (\n        <div className='profile-page'>\n            \n            <img src={dbUser.photo_url || user.imageUrl} alt=\"Profile Pic\" className='profile-pic' />\n            <h2>Welcome, {dbUser.first_name}!</h2>\n\n            <div className='profile-info'>\n                <p><strong>First Name:</strong> {dbUser.first_name}</p>\n                <p><strong>Last Name:</strong> {dbUser.last_name}</p>\n                <p><strong>Email:</strong> {dbUser.email}</p>\n                <p><strong>Phone:</strong> {dbUser.phone || 'N/A'}</p>\n                <p><strong>Card on file:</strong> Visa ending in **** {dbUser.card_last_four || '----'}</p>\n                <p><strong>Current Teams:</strong> Team Example</p>\n            </div>\n        </div>\n\n    )\n}\n\nexport default Profile;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}